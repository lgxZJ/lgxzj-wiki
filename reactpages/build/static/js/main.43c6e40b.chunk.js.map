{"version":3,"sources":["LineChart.js","BulletChart.js","MachinePage.js","App.js","serviceWorker.js","index.js"],"names":["LineChart","xFieldName","this","props","yFieldName","pointsData","config","title","visible","text","description","desc","xField","yField","seriesField","data","padding","forceFit","label","type","point","size","shape","style","fill","stroke","lineWidth","legend","position","yAxis","React","Component","BulletChart","ranges","configData","forEach","element","push","bulletTitle","measures","bulletMeasure","targets","chartTitle","rangeMax","rangeColors","custom","items","name","marker","symbol","axios","require","default","MachinePage","state","loading","chartDataArray","queryUrl","chartType","min","max","tickCount","fetchData","bind","fetchCpuData","genQueryTimeRange","setInterval","timestampEnd","Math","floor","Date","now","start","end","step","timestamp","Format","strValue","parseInt","res","result","row","rowIdx","col","colIdx","setState","preState","newState","JSON","parse","stringify","timeRange","url","get","params","query","then","machineResult","getResultFromResponse","machineDataChart","cpuData","cpuIdx","cpuDataValues","values","cpuName","metric","cpu","pointDate","unixTimestamp2DateFormat","cpuUsage","stringValue2Int","updateChartData2State","catch","err","console","log","inputs","unitTranslator","labelAppender","item","totalPromise","input","eleProcessor","dataEle","resIdx","proc","value","appendLabelPart","Promise","all","resArray","totalResult","sort","ele1","ele2","itemDataValues","fetchDataParallel","fetchMemDataParallel","device","fetchDiskIODataParallel","fetchMemData","fetchDiskIOData","fetchDiskCapacityData","fetchNetworkIOData","fetchProcCpuTopData","fetchProcMemTopData","rows","i","length","cols","j","colKey","toString","chartData","key","span","rowKey","gutter","prototype","fmt","o","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","k","test","replace","RegExp","$1","getFullYear","substr","App","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","error","message"],"mappings":"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","file":"static/js/main.43c6e40b.chunk.js","sourcesContent":["import React from 'react';\nimport { Line } from '@ant-design/charts';\n\nclass LineChart extends React.Component {\n    render() {\n        const xFieldName = this.props.xFieldName;\n        const yFieldName = this.props.yFieldName;\n        const pointsData = this.props.pointsData;\n        const chartTitle = this.props.title;\n        const chartDesc  = this.props.desc;\n        const seriesField = this.props.seriesField;\n\n        const config = {\n            title: {\n                visible: true,\n                text: chartTitle,\n            },\n            description: {\n                visible: true,\n                text: chartDesc,\n            },\n            xField: xFieldName,\n            yField: yFieldName,\n            seriesField,\n            data: pointsData,\n\n            padding: 'auto',\n            forceFit: true,\n            label: {\n                visible: true,\n                type: 'point',\n            },\n            point: {\n                visible: true,\n                size: 2,\n                shape: 'circle',\n                style: {\n                    fill: 'white',\n                    stroke: '#2593fc',\n                    lineWidth: 2,\n                },\n            },\n            legend: { position: 'right-top' },\n            yAxis: this.props.yAxis,\n        };\n\n        return (\n            <div>\n                <Line {...config} />;\n            </div>\n        );\n    }\n}\n\nexport default LineChart;","import React from 'react';\nimport { Bullet } from '@ant-design/charts';\n\nclass BulletChart extends React.Component {\n    render() {\n      let target = 85;\n      let ranges = [ 0, 0.5, 0.85, 1 ];\n      let rangeMax = 100;\n\n      let configData = [];\n      this.props.data.forEach(element => {\n        configData.push({\n          title: element.bulletTitle,\n          measures: [element.bulletMeasure],\n          targets: [target],\n          ranges,\n        })\n      });\n      \n      const config = {\n          title: {\n            visible: true,\n            text: this.props.chartTitle,\n          },\n          data: configData,\n          rangeMax,\n          rangeColors: ['#FFB1AC', '#FFDBA2', '#B4EBBF'],\n          legend: {\n            custom: true,\n            items: [\n              {\n                name: '实际进度',\n                marker: {\n                  symbol: 'square',\n                  style: { fill: '#5B8FF9' },\n                },\n              },\n              {\n                name: '目标值',\n                marker: {\n                  symbol: 'line',\n                  style: { stroke: '#5B8FF9' },\n                },\n              },\n              {\n                name: '差',\n                marker: {\n                  symbol: 'square',\n                  style: { fill: '#FFB1AC' },\n                },\n              },\n              {\n                name: '良',\n                marker: {\n                  symbol: 'square',\n                  style: { fill: '#FFDBA2' },\n                },\n              },\n              {\n                name: '优',\n                marker: {\n                  symbol: 'square',\n                  style: { fill: '#B4EBBF' },\n                },\n              },\n            ],\n          },\n        };\n\n      return (\n          <Bullet {...config} />\n      )\n    }\n}\n\nexport default BulletChart;","import React from 'react';\nimport { Row, Col } from 'antd';\n\nimport LineChart from './LineChart';\nimport BulletChart from './BulletChart';\n\nimport 'antd/dist/antd.css';\n\n\nconst axios = require('axios').default;\n\nclass MachinePage extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            loading: true,\n\n            xFieldName: \"x\",\n            yFieldName: \"y\",\n            seriesField: 'type',\n            \n            chartDataArray: [\n                [\n                    {\n                        queryUrl: \"http://metric.lgxzj.wiki/api/v1/query_range\",\n                        pointsData: [],\n                        type: 'cpu',\n                        chartType: 'line',\n                        title: \"CPU 负载\",\n                        desc: \"按cpu分组的负载率\",\n                        yAxis: {\n                            visible: true,\n                            min: 0,\n                            max: 110,\n                            tickCount: 5,\n                        },\n                    },\n                    {\n                        queryUrl: \"http://metric.lgxzj.wiki/api/v1/query_range\",\n                        pointsData: [],\n                        type: 'mem',\n                        chartType: 'line',\n                        title: \"内存 负载\",\n                        desc: \"内存资源使用情况，单位MB\",\n                        yAxis: {\n                            visible: true,\n                            min: 0,\n                            max: 4400,\n                            tickCount: 5,\n                        },\n                    },\n                    {\n                        queryUrl: \"http://metric.lgxzj.wiki/api/v1/query_range\",\n                        pointsData: [],\n                        type: 'net_io',\n                        chartType: 'line',\n                        title: \"网络 IO\",\n                        desc: \"网络收发负载，单位KB\",\n                    },\n                ],\n                [\n                    {\n                        queryUrl: \"http://metric.lgxzj.wiki/api/v1/query_range\",\n                        pointsData: [],\n                        type: 'disk_io',\n                        chartType: 'line',\n                        title: \"磁盘 IO\",\n                        desc: \"磁盘读写负载，单位KB\",\n                        // yAxis: {\n                        //     visible: true,\n                        //     min: 0,\n                        //     max: 1024 * 50,\n                        //     tickCount: 5,\n                        // },\n                    },\n                    {\n                        queryUrl: \"http://metric.lgxzj.wiki/api/v1/query_range\",\n                        pointsData: [],\n                        type: 'disk_cap',\n                        chartType: 'line',\n                        title: \"磁盘 容量\",\n                        desc: \"磁盘使用情况，单位GB\",\n                        yAxis: {\n                            visible: true,\n                            min: 0,\n                            max: 100,\n                            tickCount: 5,\n                        },\n                    },\n                    {\n                        queryUrl: \"http://metric.lgxzj.wiki/api/v1/query\",\n                        pointsData: [],\n                        type: 'proc_top_cpu',\n                        chartType: 'bullet',\n                        title: \"CPU活跃TOP10（百分比）\",\n                        desc: \"CPU活跃进程，单位百分比\",\n                        \n                    },\n                    {\n                        queryUrl: \"http://metric.lgxzj.wiki/api/v1/query\",\n                        pointsData: [],\n                        type: 'proc_top_mem',\n                        chartType: 'bullet',\n                        title: \"MEM活跃TOP10（百分比）\",\n                        desc: \"CPU活跃进程，单位百分比\",\n                        \n                    }\n                ]\n            ],\n        };\n        this.fetchData           = this.fetchData.bind(this);\n        this.fetchCpuData        = this.fetchCpuData.bind(this);\n        this.genQueryTimeRange   = this.genQueryTimeRange.bind(this);\n\n        const oneSecond = 3000;\n        setInterval(this.fetchData, oneSecond);\n    }\n\n    genQueryTimeRange() {\n        const timestampEnd = Math.floor(Date.now() / 1000);\n        const timestampStart = timestampEnd - 5;\n\n        return {\n            start:  timestampStart,\n            end:    timestampEnd,\n            step:   \"1s\",\n        };\n    }\n\n    unixTimestamp2DateFormat(timestamp) {\n        return new Date(timestamp * 1000).Format(\"HH:mm:ss\");\n    }\n\n    stringValue2Int(strValue) {\n        return parseInt(strValue);\n    }\n\n    getResultFromResponse(res) {\n         return res.data.data.result;\n    }\n\n    updateChartData2State(row, rowIdx, col, colIdx, data) {\n        row[colIdx].pointsData = data;\n        this.setState((preState) => {\n            var newState = JSON.parse(JSON.stringify(preState));\n            newState.chartDataArray[rowIdx][colIdx].pointsData = data;\n            return newState;\n        });\n    }\n\n    fetchCpuData(row, rowIdx, col, colIdx) {\n        let timeRange = this.genQueryTimeRange();\n        let url = this.state.chartDataArray[rowIdx][colIdx].queryUrl;\n        axios.get(url, {\n            params: {\n                ...timeRange,\n                query:  \"100 - (irate(node_cpu_seconds_total{mode=\\\"idle\\\"}[15s]) * 100)\"\n            }\n        })\n            .then( (res) => {\n                var machineResult = this.getResultFromResponse(res);\n\n                const machineDataChart = [];\n                machineResult.forEach((cpuData, cpuIdx) => {\n                    const cpuDataValues = cpuData.values;\n                    const cpuName = cpuData.metric.cpu;\n                    \n                    cpuDataValues.forEach((point) => {\n                        let pointDate = this.unixTimestamp2DateFormat(point[0]);\n                        const cpuUsage = this.stringValue2Int(point[1]);\n                        machineDataChart.push(\n                            {\n                                [this.state.xFieldName]: pointDate,\n                                [this.state.yFieldName]: cpuUsage,\n                                [this.state.seriesField]:\"cpu\" + cpuName,\n                            }\n                        )\n                    })\n                    \n                });\n\n                this.updateChartData2State(row, rowIdx, col, colIdx, machineDataChart);\n            })\n            .catch((err) => {\n                console.log(\"get node metrics failed\", err);\n            });\n    }\n\n\n\n    fetchDataParallel(row, rowIdx, col, colIdx, inputs, unitTranslator, labelAppender) {\n        let timeRange = this.genQueryTimeRange();\n        const item = this.state.chartDataArray[rowIdx][colIdx];\n        let url = this.state.chartDataArray[rowIdx][colIdx].queryUrl;\n\n        const totalPromise = [];\n        inputs.forEach((input) => {\n            totalPromise.push(\n                axios.get(\n                    url,\n                    {\n                        params: {\n                            ...timeRange,\n                            query: input.query,\n                        }\n                    })\n            )\n        });\n\n        const eleProcessor = (dataEle, resIdx, proc, pointDate, value) => {\n            if (unitTranslator != null) {\n                value = unitTranslator(value);\n            }\n\n            let label = inputs[resIdx].label;\n            if (labelAppender != null) {\n                let appendLabelPart = labelAppender(dataEle)\n                if (appendLabelPart != null) {\n                    label += (\"_\" + appendLabelPart);\n                }\n            }\n            \n            switch (item.type) {\n                case 'proc_top_mem':\n                case 'proc_top_cpu':\n                    return {\n                            bulletTitle: proc,\n                            bulletMeasure: value,\n                    };\n                    \n                default:\n                    return {\n                            [this.state.xFieldName]: pointDate,\n                            [this.state.yFieldName]: value,\n                            [this.state.seriesField]:label,\n                    };\n            }\n        }\n\n        Promise.all(totalPromise)\n            .then((resArray) => {\n                let totalResult = [];\n\n                console.log(\"resArray\", resArray);\n\n                resArray.forEach((res, resIdx) => {\n                    var machineResult = this.getResultFromResponse(res);\n                    \n\n                    machineResult.forEach((dataEle) => {\n                        if (item.type === 'proc_top_cpu' || item.type === 'proc_top_mem') {\n                            const proc = dataEle.metric.proc;\n                            let pointDate = this.unixTimestamp2DateFormat(dataEle.value[0]);\n                            let value = dataEle.value[1];\n\n                            totalResult.push(eleProcessor(dataEle, resIdx, proc, pointDate, value));\n                            console.log(\"before sort\", totalResult);\n                            totalResult.sort((ele1, ele2) => {\n                                return ele1.bulletMeasure - ele2.bulletMeasure;\n                            });\n                            console.log(\"after sort\", totalResult);\n                        } else {\n                            const itemDataValues = dataEle.values;\n                            const proc = null;\n                            \n                            itemDataValues.forEach((point) => {\n                                let pointDate = this.unixTimestamp2DateFormat(point[0]);\n                                let value = this.stringValue2Int(point[1]);\n                                \n                                totalResult.push(eleProcessor(dataEle, resIdx, proc, pointDate, value));\n                            });\n                        }\n                    });\n                })\n\n                this.updateChartData2State(row, rowIdx, col, colIdx, totalResult);\n            })\n            .catch((err) => {\n                console.log(\"get metrics failed\", err);\n            });\n    }\n\n    fetchMemDataParallel(row, rowIdx, col, colIdx, inputs) {\n        this.fetchDataParallel(\n            row, \n            rowIdx, \n            col, \n            colIdx, \n            inputs, \n            (value) => Math.floor(value / 1024 / 1024),\n            null);\n    }\n\n    fetchMemData(row, rowIdx, col, colIdx) {\n        let machineDataChart = [];\n\n        const inputs = [\n            {\n                query:    \"node_memory_MemTotal_bytes\",\n                label:    \"mem_total\",\n            },\n            {\n                query:      \"node_memory_MemFree_bytes\",\n                label:      \"mem_free\",\n            }\n        ]\n        this.fetchMemDataParallel(row, rowIdx, col, colIdx, inputs, machineDataChart);\n    }\n\n    fetchDiskIODataParallel(row, rowIdx, col, colIdx, inputs) {\n        this.fetchDataParallel(\n            row, \n            rowIdx, \n            col, \n            colIdx, \n            inputs, \n            null,\n            (dataEle) => {\n                if (dataEle.metric.device != null) {\n                    return dataEle.metric.device;\n                }\n                return null;\n            });\n    }\n\n    fetchDiskIOData(row, rowIdx, col, colIdx) {\n        const inputs = [\n            {\n                query:    \"irate(node_disk_written_bytes_total[15s])\",\n                label:    \"written\",\n            },\n            {\n                query:      \"irate(node_disk_read_bytes_total[15s])\",\n                label:      \"read\",\n            },\n            {\n                query:      \"irate(node_textfile_scrape_error[15s])\",\n                label:      \"open_err\",\n            },\n        ]\n        this.fetchDiskIODataParallel(row, rowIdx, col, colIdx, inputs);\n    }\n\n    fetchNetworkIOData(row, rowIdx, col, colIdx) {\n        const inputs = [\n            {\n                query:    \"irate(node_network_receive_bytes_total[15s])\",\n                label:    \"recv\",\n            },\n            {\n                query:    \"irate(node_network_receive_errs_total[15s])\",\n                label:    \"recv_err\",\n            },\n            {\n                query:      \"irate(node_network_transmit_bytes_total[15s])\",\n                label:      \"sent\",\n            },\n            {\n                query:      \"irate(node_network_transmit_errs_total[15s])\",\n                label:      \"sent_err\",\n            }\n        ]\n\n        this.fetchDataParallel(\n            row, \n            rowIdx, \n            col, \n            colIdx, \n            inputs, \n            (value) => Math.floor(value / 1024),\n            (dataEle) => dataEle.metric.device\n        );\n    }\n\n    fetchProcCpuTopData(row, rowIdx, col, colIdx) {\n        const inputs = [\n            {\n                query:    \"ps_pusher_cpu\",\n                label:    \"\",\n            }\n        ];\n        this.fetchDataParallel(\n            row, \n            rowIdx, \n            col, \n            colIdx, \n            inputs, \n            (value) => value,\n            null\n        );\n    }\n\n    fetchProcMemTopData(row, rowIdx, col, colIdx) {\n        const inputs = [\n            {\n                query:    \"ps_pusher_mem\",\n                label:    \"\",\n            }\n        ];\n        this.fetchDataParallel(\n            row, \n            rowIdx, \n            col, \n            colIdx, \n            inputs, \n            (value) => value,\n            null\n        );\n    }\n\n    fetchDiskCapacityData(row, rowIdx, col, colIdx) {\n        const inputs = [\n            {\n                query:    \"node_filesystem_size_bytes\",\n                label:    \"size_total\",\n            },\n            {\n                query:    \"node_filesystem_size_bytes-node_filesystem_avail_bytes\",\n                label:    \"size_used\",\n            },\n            \n        ]\n\n        this.fetchDataParallel(\n            row, \n            rowIdx, \n            col, \n            colIdx, \n            inputs, \n            (value) => Math.floor(value / 1024 / 1024 / 1024),\n            (dataEle) => { console.log(\"disk_cap\", dataEle.metric.device); return dataEle.metric.device;}\n        );\n    }\n\n    fetchData() {\n        this.state.chartDataArray.forEach((row, rowIdx) => {\n            row.forEach((col, colIdx) => {\n                switch (col.type) {\n                    case \"cpu\":         this.fetchCpuData(row, rowIdx, col, colIdx);            break;\n                    case \"mem\":         this.fetchMemData(row, rowIdx, col, colIdx);            break;\n                    case \"disk_io\":     this.fetchDiskIOData(row, rowIdx, col, colIdx);         break;\n                    case \"disk_cap\":    this.fetchDiskCapacityData(row, rowIdx, col, colIdx);   break;\n                    case \"net_io\":      this.fetchNetworkIOData(row, rowIdx, col, colIdx);      break;\n                    \n                    case 'proc_top_cpu':this.fetchProcCpuTopData(row, rowIdx, col, colIdx);     break;\n                    case 'proc_top_mem':this.fetchProcMemTopData(row, rowIdx, col, colIdx);     break;\n                    \n                    default:        break;\n                }\n            })\n        })\n    }\n\n    componentDidMount() {\n        this.fetchData();\n    }\n    componentWillUnmount() {\n        \n    }\n\n    render() {\n        const rows = [];\n        for (let i = 0; i < this.state.chartDataArray.length; ++i) {\n            const cols = [];\n            for (let j = 0; j < this.state.chartDataArray[i].length; ++j) {\n                let colKey = \"col_\" + i.toString() + \"_\" + j.toString();\n                let chartData = this.state.chartDataArray[i][j];\n\n                if (chartData.chartType === 'line') {\n                    const data = {\n                        xFieldName: this.state.xFieldName,\n                        yFieldName: this.state.yFieldName,\n                        seriesField: this.state.seriesField,\n                        pointsData: chartData.pointsData,\n                        title: chartData.title,\n                        desc: chartData.desc,\n                        yAxis: chartData.yAxis,\n                    }\n    \n                    \n                    cols.push(\n                        <Col key={colKey} span={8} > \n                            <LineChart {...data} />\n                        </Col>\n                    );\n                }\n                if (chartData.chartType === 'bullet') {\n                    const config = {\n                        data: chartData.pointsData,\n                        chartTitle: chartData.title,\n                    };\n                    console.log(\"====\", config);\n                    cols.push(\n                        <Col key={colKey} span={8} > \n                            <BulletChart {...config} />\n                        </Col>\n                    )\n                }\n                \n            }\n\n            const rowKey = \"row_\" + i.toString();\n            rows.push(\n                <Row key={rowKey} gutter={[16, 16]}>\n                    {cols}\n                </Row>\n            )\n        }\n\n        return (\n            <div>\n                {rows}\n            </div>\n        );\n    }\n}\n\n// 对Date的扩展，将 Date 转化为指定格式的String\n// 月(M)、日(d)、小时(h)、分(m)、秒(s)、季度(q) 可以用 1-2 个占位符， \n// 年(y)可以用 1-4 个占位符，毫秒(S)只能用 1 个占位符(是 1-3 位的数字) \n// 例子： \n// (new Date()).Format(\"yyyy-MM-dd hh:mm:ss.S\") ==> 2006-07-02 08:09:04.423 \n// (new Date()).Format(\"yyyy-M-d h:m:s.S\")      ==> 2006-7-2 8:9:4.18 \nDate.prototype.Format = function (fmt) { //author: meizz \n    var o = {\n        \"M+\": this.getMonth() + 1, //月份 \n        \"d+\": this.getDate(), //日 \n        \"H+\": this.getHours(), //小时 \n        \"m+\": this.getMinutes(), //分 \n        \"s+\": this.getSeconds(), //秒 \n        \"q+\": Math.floor((this.getMonth() + 3) / 3), //季度 \n        \"S\": this.getMilliseconds() //毫秒 \n    };\n    if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (this.getFullYear() + \"\").substr(4 - RegExp.$1.length));\n    for (var k in o)\n    if (new RegExp(\"(\" + k + \")\").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length === 1) ? (o[k]) : ((\"00\" + o[k]).substr((\"\" + o[k]).length)));\n    return fmt;\n}\n\nexport default MachinePage;","import React from 'react';\nimport './App.css';\nimport MachinePage from './MachinePage';\n\nfunction App() {\n  return (\n    <MachinePage />\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}